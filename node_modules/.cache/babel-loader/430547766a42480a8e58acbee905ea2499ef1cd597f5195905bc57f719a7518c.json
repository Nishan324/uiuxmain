{"ast":null,"code":"import { collection, addDoc, query, where, getDocs } from 'firebase/firestore';\nimport { auth, db } from '../firebase';\nexport const handleAddToCart = async (user, productId, productName, price, imageUrl) => {\n  // Check if the user is authenticated\n  if (!user) {\n    alert('Please log in to add the product to the cart.');\n    console.log('User not logged in. Please log in to add to cart.');\n    return;\n  } else console.log('User:', user);\n  const quantity = 1;\n  alert(\"Product Added to cart\");\n  try {\n    // Reference to the 'carts' collection in Firestore\n    const cartsRef = collection(db, 'carts');\n\n    // Query to find the user's cart based on userId\n    const userCartQuery = query(cartsRef, where('userId', '==', user.uid));\n\n    // Get the query snapshot\n    const userCartSnapshot = await getDocs(userCartQuery);\n    const userCartDoc = userCartSnapshot.docs[0];\n    const userCartItemsRef = collection(db, 'carts', userCartDoc.id, 'items');\n    // Add the new item to the 'items' subcollection\n    await addDoc(userCartItemsRef, {\n      productId: productId,\n      productName: productName,\n      quantity: quantity,\n      price: price || 0,\n      totalprice: quantity * parseInt(price || 0),\n      image: imageUrl || ''\n    });\n    console.log('Item added to cart');\n  } catch (error) {\n    console.error('Error adding to cart:', error.message);\n  }\n};","map":{"version":3,"names":["collection","addDoc","query","where","getDocs","auth","db","handleAddToCart","user","productId","productName","price","imageUrl","alert","console","log","quantity","cartsRef","userCartQuery","uid","userCartSnapshot","userCartDoc","docs","userCartItemsRef","id","totalprice","parseInt","image","error","message"],"sources":["C:/Users/hp/Desktop/nishan/furniture-website/src/pages/cart.js"],"sourcesContent":["\r\nimport { collection, addDoc, query, where, getDocs } from 'firebase/firestore';\r\nimport { auth, db } from '../firebase';\r\n\r\nexport const handleAddToCart = async (user, productId, productName, price, imageUrl) => {\r\n    // Check if the user is authenticated\r\n    if (!user) {\r\n        alert('Please log in to add the product to the cart.');\r\n        console.log('User not logged in. Please log in to add to cart.');\r\n\r\n        return;\r\n    }\r\n    else\r\n    console.log('User:', user);\r\n\r\n    const quantity = 1;\r\n    alert(\"Product Added to cart\");\r\n\r\n    try {\r\n        // Reference to the 'carts' collection in Firestore\r\n        const cartsRef = collection(db, 'carts');\r\n\r\n        // Query to find the user's cart based on userId\r\n        const userCartQuery = query(cartsRef, where('userId', '==', user.uid));\r\n\r\n        // Get the query snapshot\r\n        const userCartSnapshot = await getDocs(userCartQuery);\r\n\r\n        const userCartDoc = userCartSnapshot.docs[0];\r\n        const userCartItemsRef = collection(db, 'carts', userCartDoc.id, 'items');\r\n        // Add the new item to the 'items' subcollection\r\n        await addDoc(userCartItemsRef, {\r\n            productId: productId,\r\n            productName: productName,\r\n            quantity: quantity,\r\n            price: price || 0,\r\n            totalprice: quantity * parseInt(price || 0),\r\n            image: imageUrl || '',\r\n        });\r\n\r\n        console.log('Item added to cart');\r\n    } catch (error) {\r\n        console.error('Error adding to cart:', error.message);\r\n    }\r\n};\r\n"],"mappings":"AACA,SAASA,UAAU,EAAEC,MAAM,EAAEC,KAAK,EAAEC,KAAK,EAAEC,OAAO,QAAQ,oBAAoB;AAC9E,SAASC,IAAI,EAAEC,EAAE,QAAQ,aAAa;AAEtC,OAAO,MAAMC,eAAe,GAAG,MAAAA,CAAOC,IAAI,EAAEC,SAAS,EAAEC,WAAW,EAAEC,KAAK,EAAEC,QAAQ,KAAK;EACpF;EACA,IAAI,CAACJ,IAAI,EAAE;IACPK,KAAK,CAAC,+CAA+C,CAAC;IACtDC,OAAO,CAACC,GAAG,CAAC,mDAAmD,CAAC;IAEhE;EACJ,CAAC,MAEDD,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEP,IAAI,CAAC;EAE1B,MAAMQ,QAAQ,GAAG,CAAC;EAClBH,KAAK,CAAC,uBAAuB,CAAC;EAE9B,IAAI;IACA;IACA,MAAMI,QAAQ,GAAGjB,UAAU,CAACM,EAAE,EAAE,OAAO,CAAC;;IAExC;IACA,MAAMY,aAAa,GAAGhB,KAAK,CAACe,QAAQ,EAAEd,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAEK,IAAI,CAACW,GAAG,CAAC,CAAC;;IAEtE;IACA,MAAMC,gBAAgB,GAAG,MAAMhB,OAAO,CAACc,aAAa,CAAC;IAErD,MAAMG,WAAW,GAAGD,gBAAgB,CAACE,IAAI,CAAC,CAAC,CAAC;IAC5C,MAAMC,gBAAgB,GAAGvB,UAAU,CAACM,EAAE,EAAE,OAAO,EAAEe,WAAW,CAACG,EAAE,EAAE,OAAO,CAAC;IACzE;IACA,MAAMvB,MAAM,CAACsB,gBAAgB,EAAE;MAC3Bd,SAAS,EAAEA,SAAS;MACpBC,WAAW,EAAEA,WAAW;MACxBM,QAAQ,EAAEA,QAAQ;MAClBL,KAAK,EAAEA,KAAK,IAAI,CAAC;MACjBc,UAAU,EAAET,QAAQ,GAAGU,QAAQ,CAACf,KAAK,IAAI,CAAC,CAAC;MAC3CgB,KAAK,EAAEf,QAAQ,IAAI;IACvB,CAAC,CAAC;IAEFE,OAAO,CAACC,GAAG,CAAC,oBAAoB,CAAC;EACrC,CAAC,CAAC,OAAOa,KAAK,EAAE;IACZd,OAAO,CAACc,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAACC,OAAO,CAAC;EACzD;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}